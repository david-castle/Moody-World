{% extends "base.html" %}
{% block title %}Results{% endblock %}
{% block content %}


<head>
    <h1 class="title">Query Results</h1>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>    
    <!-- Load jQuery and PapaParse to read data from a CSV file -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>

</head>

<body>
    <!-- Insert HTML division tag to layout the table -->
    <div id="table"></div>

    <Script>
        $.get('static/processed_frame.csv', function(csvString) {

            // Use PapaParse to convert string to array of objects
            var spreadsheet = Papa.parse(csvString, {header: false, 
                complete: function (results) {
                results.data[0].map(function (id, index) {
                    var element = document.querySelector('#' + id);
                    if (element) { // exist
                    element.innerHTML = results.data[1][index];
                    }
                });
                }
            });
            })

    </Script>

</body>

{% endblock %}
